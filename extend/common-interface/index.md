---
title: Common interface Specification
permalink: /extend/common-interface/
---

[Custom Science](/extend/custom-science/) and [Docker Extensions](/extend/docker/), as well as
[Transformations](https://help.keboola.com/??/), are dockerized applications. 
They run inside a [docker container](/extend/docker/tutorial/).

To exchange data between your dockerized application and 
Keboola Connection [Docker Component](/overview/docker-bundle/), use a 
predefined set of [structured folders](#folder-structure),  
a [configuration file](/extend/common-interface/config-file/),
and [environment variables](/extend/common-interface/environment/). 
Your application can read input files from a given folder (`in`, and is required to produce its results to 
another defined folder (`out`).
Additionally, the [Docker Component](/overview/docker-bundle/) provides tools for 
[encryption](/overview/encryption) and [Oauth2 authorization](/common-interface/oauth/) 

## Folder Structure
`/data/` is the root folder for exchanging data. Keboola Connection takes care of injecting required tables 
and files and picking up tables and files generated by your code. The data folder contains actual data 
files (tables and files) and metadata. For each datafile 
a [manifest file](/extend/common-interface/manifest-files/) is created. It contains metadata 
information (keys for the table, creation time, etc.). 

To create a data directory sample, you can use [create sandbox](/extend/common-interface/) via the
[Docker bundle API](http://docs.kebooladocker.apiary.io/#reference/sandbox). 
All the resources you need in your app will be provided in a ZIP archive. 

The predefined data exchange folder structure is following
  
    /data/in/tables
    /data/in/files
    /data/out/tables
    /data/out/files
    
This folder structure is always available to your application. The current directory will always be set to
`/data/`, so the above folders can be accessed both with absolute and relative paths (e.g. `in/tables`). 
Do not put arbitrary files in the `/data/` directory as they will be uploaded into the user project 
(or cause errors in the output mapping). For working or temporary files, use either the `/home/` or `/tmp/` directory.

### `/data/in/tables`

The folder contains tables defined in the input mapping which are serialized in the CSV format:
 
  - string delimiter `"`
  - separator `,`
  - no escape character
 
File names are specified in the input mapping, defaulting to `{tableId}.csv` (a file name can be changed in UI).
The table metadata is stored in the [manifest file](/extend/common-interface/manifest-files/).

### `/data/out/tables`

All output tables from your application must be placed in this folder. The destination table in 
[Storage](https://help.keboola.com/???) is defined by the following rules (listed in order):

- If `defaultBucket` (see [below])(#default-bucket) is specified, it applies only 
to the [Docker extension](/extend/docker/). The table will be uploaded to a
bucket whose name is created from the extension and configuration names.
- If the output mapping is specified (through the UI usually), and its *source* matches the physical file name in 
`/data/out/tables` directory, the *destination* is the name of the table in Storage. An output mapping which cannot be
matched to a physical file produces an error (i.e. fulfilling the output mapping is mandatory). 
- If a [manifest file](/extend/common-interface/manifest-files/) exists, it can specify *destination* of
the table in Storage if no output mapping is present. 
- If none of the above options are used, the destination is defined by the name of the file 
(e.g. `out.c-data.my-table.csv` will create a *my-table* table in the *out-c-data* bucket). The filename must have
at least two dots.
- If neither rule can be applied, an error is thrown.   
  
Basically, manifests allow you to process files in the `/data/out` folder without explicitly being defined in the 
output mapping. That allows for a flexible and dynamic output mapping, where the structure is unknown at the beginning.
Using filenames (e.g. `out.c-data.my-table.csv`) for an output mapping is great for saving implementation time in simple or 
POC applications.
Note that all files in the `/data/out/tables` folder will be uploaded, not only those specified in the output mapping or
manifests.

The expected CSV format:

  - string enclosure `"`
  - delimiter `,`
  - no escape character

A [manifest file](/extend/common-interface/manifest-files/) can specify a different enclosure and delimiter. 


#### Default Bucket
If you cannot define a bucket or want to get it automatically, request setting 
the `default_bucket` flag during your [extension registration](/extend/registration). 

All tables in `/data/out/tables` will then be uploaded to a bucket identified by your
component id (created upon the extension registration) and 
a configuration id (created when an end-user adds new extension configuration) where the
file name (minus `.csv` suffix) will be used as the table name. The `destination` attributes 
in the output mapping and file manifests will be overridden.
 
Note: The `default_bucket` flag always requires the `config` parameter when creating a job manually using 
API even if the `config` configuration does not exist in Storage. This feature
is available only for [Docker extensions](/extend/docker/).  

### `/data/in/files`  

Files defined in the input mapping are stored in their raw form, file names are numeric and 
equal to `{fileId}_{filename}` in Storage. All other information about the files is available 
in the [manifest file](/extend/common-interface/manifest-files/).

### `/data/out/files`

All files in this folder are uploaded to Storage. File names are preserved and tags and other upload options 
can be specified in the [manifest file](/extend/common-interface/manifest-files/).
Note that all files in the `/data/out/files` folder will be uploaded, not only those specified in the output mapping.

