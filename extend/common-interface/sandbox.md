---
title: Creating Sandbox
permalink: /extend/common-interface/sandbox/
---

* TOC
{:toc}

In order to run and debug KBC dockerized applications (including
[Custom Science](/extend/custom-science/) and [R] and [Python] Transformations)
on your own computer, you need to
manually supply the application with a [data folder and configuration file](/extend/common-interface/).

To create a sample data folder, use
a [Docker Runner](/overview/docker-bundle/) API. There are three calls available:

- [create sandbox](http://docs.kebooladocker.apiary.io/#reference/sandbox/sandbox) -- use with components with/without [registration](/extend/registration/)
- [input data](http://docs.kebooladocker.apiary.io/#reference/sandbox/input-data/create-an-input-job) -- use with already registered components
- [dry run](http://docs.kebooladocker.apiary.io/#reference/dry-run) -- only for [debugging](/extend/docker/#debugging) registered extensions

The API calls will resolve and validate the input mapping and create a configuration file.
Then they will archive the whole `/data/` folder and upload it to your KBC project.
None of these API calls will write any tables or files other than the archive,
so they are very safe to run.

The body structure of the first two API calls is the same.
Before you start, you need a [KBC project](/overview/devel-project/). We recommend that you use [Apiary or Postman](/overview/api/) to call the API.


## Create Sandbox API Call

### Prepare
[Create a table](https://help.keboola.com/overview/tutorial/load/) in KBC Storage which contains a column named `number`.
You can use the [sample table](/extend/source.csv). In the following example, the
table is stored in the `in.c-main` bucket and the table name is `test`. The table ID is therefore
`in.c-main.test`.

{: .image-popup}
![Storage Screenshot](/extend/common-interface/sandbox-data.png)

You also need your Storage API token which can be found by clicking the icon at the top right corner.


### Create the API Request

Get a [collection of sample](/overview/api/) requests in Postman
here: [![Run in Postman](https://run.pstmn.io/button.png)](https://app.getpostman.com/run-collection/7dc2e4b41225738f5411)
There is a *Sandbox introduction* request, with the following JSON contents in its body:

{% highlight json %}
{
    "configData": {
        "storage": {
            "input": {
                "tables": [
                    {
                        "source": "in.c-main.test",
                        "destination": "source.csv"
                    }
                ]
            }
        },
        "parameters": {
            "multiplier": 4
        }
    }
}
{% endhighlight %}

The node `configData.storage.input.tables.source` refers to the existing table ID (the table created
in the previous step) in Storage. The `configData.storage.input.tables.destination` node refers to the
destination to which the table will be downloaded for the application; it will therefore be the
*source* for the application.
For registered components with an UI, the entire `configData.storage` node is generated by the UI.
The node `parameters` contains arbitrary parameters which are passed to the application.

The URL of the request is `https://syrup.keboola.com/docker/sandbox?format=json`; the format parameter can be
either `json` or `yaml` and defines the language used for
[configuration files](/extend/common-interface/config-file/) the application will receive. Regardless of
what format is chosen, the request itself is always in JSON.

Enter your Storage API token into *Headers* - *X-StorageAPI-Token*.


### Run the API Request

When running the request with valid parameters, you should receive a response similar to this:

{% highlight json %}
{
    "id": "176883685",
    "url": "https://syrup.keboola.com/queue/job/176883685",
    "status": "waiting"
}
{% endhighlight %}

This means an asynchronous job which will prepare the sandbox has been created.
If curious, view the job progress under *Jobs* in KBC:

{: .image-popup}
![Job progress screenshot](/extend/common-interface/sandbox-progress.png)

The job will be usually executed very quickly, so you might as well go straight to *Storage* - *File Uploads* in
KBC. There you will find a `data.zip` file with a sample data folder. You can now use this folder with your
[Docker extension](/extend/docker/) or [Custom Science](/extend/custom-science/)


## Input Data API Call
The input API call differs in that it *must* be used with an existing component. It requires *componentId* obtained
from [component registration](/extend/registration/). This also means that this call can be used both with
with existing configurations as well as ad-hoc configurations (as in the above [sandbox](#create-sandbox-api-call) request.

### Prepare
We assume you have the same source table `in.c-main.test` as in the [previous request](#prepare).
You can then create configuration for our sample component *keboola.docs-docker-example-parameters* by
visiting the URL:

    https://connection.keboola.com/admin/projects/{projectId}/applications/keboola.docs-docker-example-parameters

Where you replace `{projectId}` with the Id of the project in KBC (you can find that in the URL). Then
create the configuration. The equivalent to what we have used in the [Sandbox above](#create-sandbox-api-call) call would be:

{: .image-popup}
![Configuration screnshot](/extend/common-interface/input-configuration.png)

### Run the API Request
When you created the configuration, it was assigned a configuration Id - `sample-configuration-27` in our example.
Use this Id, instead of manually crafting the request body.

You can see an *Input data Introduction* sample request in [our collection of requests](/overview/api/) in Postman
: [![Run in Postman](https://run.pstmn.io/button.png)](https://app.getpostman.com/run-collection/7dc2e4b41225738f5411)

The request body is:

{% highlight json %}
{
    "config": "sample-configuration-27"
}
{% endhighlight %}

Where you need to replace `sample-configuration-27` with your own configuration ID. The request URL is:

    https://syrup.keboola.com/docker/keboola.docs-docker-example-parameters/input/

Where `keboola.docs-docker-example-parameters` is the component ID (you can replace that with your own component if you like).
Again, do not forget to enter your Storage API token into *Headers* - *X-StorageAPI-Token*.

As with the [sandbox call](#create-sandbox-api-call), running the API call will create a job, which will execute and produce a
`data.zip` file in *Storage* - *File Uploads*.

Note: If you actually want to *run* the above *sample-configuration-27* configuration, you also need
to set the output mapping from `destination.csv` to some table.

## Summary
- For unregistered components, use the Sandbox call:
  - the whole configuration must be passed as the body (`configData` node) of the API call in JSON format
  - the source data are limited to 50 rows
  - the format of the configuration in the data folder is specified in the `format` parameter
- For registered components, use the Input data call:
  - the configuration can be either passed as the body (`configData` node) or refer to
existing configuration (`config` node)
  - the source data are exported unlimited -- this can lead to large data folders!
  - the format of the configuration in the data folder was defined when the component was registered
- Both the Sandbox and Input call create a job (which gets executed automatically) which produces a `data.zip` file
in your *Storage* -- *File Uploads*
  - you can extract the `data.zip` folder and map that folder to your dockerized application
  - the `data.zip` contains the input tables and files, their manifests and configuration file
  - the `data.zip` does not contain any data in the `out` folder, your application has to produce it
