---
title: Creating Sandbox
permalink: /extend/common-interface/sandbox/
---

If you want to run and debug dockerized applications (this includes 
[Custom Scienence](/extend/custom-science/) and also [R] and [Python] transformations)
for KBC on your own computer, you need to
manually supply the application with [data folder and configuration file](/extend/common-interface/). 

To create a sample data folder, you need to use 
[docker-bundle](/overview/api/docker-bundle/) API, which offers three calls:
- [create sandbox](http://docs.kebooladocker.apiary.io/#reference/sandbox/sandbox)
- [input data](http://docs.kebooladocker.apiary.io/#reference/sandbox/input-data/create-an-input-job)
- [dry run](http://docs.kebooladocker.apiary.io/#reference/dry-run) 

The *dry run* call is useful only for debugging [registered extensions](/extend/docker/#debugging).
The main difference between those first two is that the *create sandbox* call can be used even with components 
which are not yet [registered](/extend/registration/). The *input data* API call must be used with components
which are already registred. The structure of the body of both API calls is same.
Before you start you need a [KBC project](/overview/devel-project/). We recommend that you use
[Apiary or Postman](/overview/api/) to call the API.


## Create Sandbox API call

### Prepare
[Create a table](https://help.keboola.com/??) in KBC storege which contains a column named `number`. 
You can use the [sample table](/extend/source.csv). In the following example, we assume, that the 
table will be stored in bucket `in.c-main` and the table name is `test`. The table ID is therefore
`in.c-main.test`.

![Storage Screenshot](/extend/commmon-interface/sandbox-data.png)

You will also need your Storage API token, which you can found by clicking the icon at the top right corner.


### Create the API request

You can get a [collection of sample](/overview/api/) requests in Postman 
here: [![Run in Postman](https://run.pstmn.io/button.png)](https://www.getpostman.com/run-collection/7dc2e4b41225738f5411)
There is a request *Sandbox introduction*, with the following JSON contents in body:  

    {
        "configData": {
            "storage": {
                "input": {
                    "tables": [
                        {
                            "source": "in.c-main.test",
                            "destination": "source.csv"
                        }
                    ]
                },
            }
            "parameters": {
                "multiplier": 4
            }
        }
    }
    
The node `configData.storage.input.tables.source` refers to existing table ID (the table we created
in previous step) in Storage. The node `configData.storage.input.tables.destination` refers to the
destination to which the table will be downladed for the application (it will therefore be the 
*source* for the application).
For components which are registered and have an UI, the entire `configData.storage` node is generated by the UI.
The node `parameters` contains arbitrary parameters which are passed to the application.

The URL of the request is `https://syrup.keboola.com/docker/sandbox?format=json`, the format paramter can be
eithe `json` or `yaml` and defines the language used for 
[configuration files](/extend/common-interface/config-file/) the application will receive. Regardles of
what format is chosen, the request itself is always in JSON.

Enter your Storage API token under into *Headers* - *X-StorageAPI-Token*.


### Run the API request

When you run the request with a valid parameters, you should receive a response simirlar to this:

    {
        "id": "176883685",
        "url": "https://syrup.keboola.com/queue/job/176883685",
        "status": "waiting"
    }
 
This means that an asynchronous job has been created which will prepare the sandbox. If you are 
curious, you can view the job progress under *Jobs* in KBC: 

![Job progress screenshot](/extend/common-interface/sandbox-progress.png)

The job will usually execute very quickly, so you might as well go straight to *Storage* - *File Uploads* in
KBC, where you will find a `data.zip` file with sample data folder. You can now use this folder with your 
[Docker extension](/extend/docker/) or [Custom science](/extend/custom-science/) 


## Input Data API Call
The input API call differes in that it *must* be used with an existing component. It requires *componentId* obtained
from [component registration](/extend/register/). This also means that this call can be used both with 
with existing configurations as well as ad-hoc configurations (as in the above [sandbox](#sandbox) request.

### Prepare
We assume the you have the same source table `in.c-main.test` as in the [previous request](#prepare).
You can then create configuration for our sample component *keboola.docs-docker-example-parameters* by
visiting the URL:

    https://connection.keboola.com/admin/projects/{projectId}/applications/keboola.docs-docker-example-parameters 

Where you replace `{projectId}` with the Id of the project in KBC (you can find that in URL). You can then
create configuration. The equivalent to what we have used in the [Sandbox above](#sandbox) call would be: 

![Configuration screnshot](/extend/common-interface/input-configuration.png)

### Run the API request
When you created the configuration, it was assigned a configuration Id - `sample-configuration-27` in our example.
You can then use this Id, instead of manually crafting the request body. 

You can see a the sample request *Input data Introduction* in [our collection of requests](/overview/api/) in Postman 
: [![Run in Postman](https://run.pstmn.io/button.png)](https://www.getpostman.com/run-collection/7dc2e4b41225738f5411)

The request body is:

    {
        "config": "sample-configuration-27"
    }

Where you need to replace `sample-configuration-27` with your own configuration ID. The request URL is:
https://syrup.keboola.com/docker/keboola.docs-docker-example-parameters/input/
Where `keboola.docs-docker-example-parameters` is component ID (you can replace that with your own component if you like).
As usual, don't forget to enter your Storage API token in *Headers* - *X-StorageAPI-Token*.

As with the [sandbox call](#sandbox), running the API call will create a job, which will execute and produce a 
`data.zip` file in *Storage* - *File Uploads*. The contents of the 

Note: if you actually want to *run* the above *sample-configuration-27* configuration, you also need
to set outputmapping from `destination.csv` to some table.

# Summary
- for unregistered components, use the Sandbox call
 - for Sandbox call, the whole configuration must be passed as the body (`configData` node) of the API call in JSON format
 - for Sandbox call, the source data are limited to 50 rows
 - for Sandbox call, the format of the configuration in the data folder is specified in the `format` parameter
- for registered components, use the Input data call
 - for Input data call the configuration can be either passed as the body (`configData` node) or refer to 
existing configuration (`config` node)
 - for Input data call, the source data are exported unlimited - this can lead to large data folders! 
 - for Input data call, the format of the configuration in the data folder was defined when the component was registered
- both of the Sandbox and Input call create a job (which gets executed automatically) which produces a `data.zip` file 
in your *Storage* - *File Uploads*
 - you can extract the `data.zip` folder and map that folder to your dockerized application 
 - the `data.zip` contains the input tables and files, their manifests and configuration file
 - the `data.zip` does not contain any data in the `out` folder, your applicatio has to produce it
